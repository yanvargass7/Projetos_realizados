<!DOCTYPE html>
<html lang="pt-br">

<head>
	<meta charset="ISO-8859-1">
	<title>Teste</title>
	
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>


<body>
	<h1>Teste</h1>
	
	<form action="" id="formcadastrouser">
	
		<div class="mb-3">
	  	<label for="id" class="form-label">ID</label>
	  	<input type="text" class="form-control" id="id" readonly="readonly">
		</div>
		
		<div class="mb-3">
  		<label for="nome" class="form-label">Nome do Usuário</label>
 		 <input type="text" class="form-control" id="nome" placeholder="Informe o nome" required="required">
		</div>

		<div class="mb-3">
  		<label for="idade" class="form-label">Idade do usuário</label>
  		<input type="number" class="form-control" id="idade" placeholder="Informe a idade">
		</div>
		
	</form>
	
	<button type="button" class="btn btn-primary" onclick="salvarusuario()">Salvar</button>
	<button type="button" class="btn btn-secondary" onclick="document.getElementById('formcadastrouser').reset();">Novo</button>
	
	<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>

	<script type="text/javascript">
	
		function salvarusuario(){
			
			var id = $("#id").val();
			var nome = $("#nome").val();
			var idade = $("#idade").val();
			
			$.ajax({
				  method: "POST",
				  url: "salvar",
				  data: JSON.stringify({id : id, nome : nome, idade : idade}),
				  contentType: "application/json; charset-utf-8",
				  success: function (response){
					
					$ ("#id").val(response.id);
					alert("Gravou com sucesso!");  
					}
				}).fail(function(xhr, status, errorThrown ) {
				    alert( "Erro ao salvar usuário: " + xhr.responseText );
				  });
			}
	</script>
	
</body>

</html>